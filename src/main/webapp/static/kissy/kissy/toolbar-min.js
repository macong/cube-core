/*
Copyright 2012, KISSY UI Library v1.40dev
MIT Licensed
build time: Jul 30 19:04
*/
KISSY.add("toolbar/separator",function(i,l,j){return j.extend({},{},{xclass:"toolbar-separator",priority:20})},{requires:["component","separator"]});
KISSY.add("toolbar",function(i,l,j,p,k){function g(a,b,c){var c=c.get("children"),e=0,d=c.length;if(a==k&&(a=1==b?0:d-1,!c[a].get("disabled")))return c[a];do e++,a=(a+d+b)%d;while(e<d&&c[a].get("disabled"));return e!=d?c[a]:null}function m(a){a.target!=this&&(a.newVal?this.set("expandedItem",null):this.set("expandedItem",a.target))}function n(a){var b,c=a.target;if(c!=this)if(a.newVal){if(this.set("highlightedItem",c),(b=this.get("expandedItem"))&&b.hasAttr("collapsed")&&b!=c)b.set("collapsed",!0),
c.set("collapsed",!1)}else this.set("highlightedItem",null)}function o(a){a=a.child;a.set("handleMouseEvents",!1);a.set("focusable",!1);a.publish("afterCollapsedChange afterHighlightedChange",{bubbles:1})}var f=j.KeyCodes,h=l.Container.extend({initializer:function(){this.on("addChild",o)},createDom:function(){this.get("el").attr("role","toolbar")},_uiSetHighlightedItem:function(a){var b;a?((b=a.get("el").attr("id"))||a.get("el").attr("id",b=i.guid("ks-toolbar-item")),this.get("el").attr("aria-activedescendant",
b)):this.get("el").attr("aria-activedescendant","")},bindUI:function(){this.on("afterCollapsedChange",m,this);this.on("afterHighlightedChange",n,this)},handleBlur:function(){var a,b;(b=this.get("expandedItem"))&&b.set("collapsed",!0);(a=this.get("highlightedItem"))&&a.set("highlighted",!1)},handleKeyEventInternal:function(a){var b=this.get("highlightedItem"),c=b,e=this.get("orientation"),d=this.get("children"),d=b&&i.indexOf(b,d);if(b&&b.handleKeyEventInternal(a))return!0;if(a.shiftKey||a.ctrlKey||
a.metaKey||a.altKey)return!1;switch(a.keyCode){case f.ESC:return this.getKeyEventTarget().fire("blur"),!0;case f.HOME:b=g(k,1,this);break;case f.END:b=g(k,-1,this);break;case f.UP:if(e==h.VERTICAL)b=g(d,-1,this);else return!1;break;case f.LEFT:if(e==h.HORIZONTAL)b=g(d,-1,this);else return!1;break;case f.DOWN:if(e==h.VERTICAL)b=g(d,1,this);else return!1;break;case f.RIGHT:if(e==h.HORIZONTAL)b=g(d,1,this);else return!1;break;default:return!1}c&&c.set("highlighted",!1);b&&b.set("highlighted",!0);return!0}},
{ATTRS:{highlightedItem:{},expandedItem:{},orientation:{value:0}}},{xclass:"toolbar"});i.mix(h,{HORIZONTAL:0,VERTICAL:1});return h},{requires:["component","node","toolbar/separator"]});
